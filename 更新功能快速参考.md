# XexunRTT è‡ªåŠ¨æ›´æ–°åŠŸèƒ½å¿«é€Ÿå‚è€ƒ

## ğŸ¯ ä¸€åˆ†é’Ÿä¸Šæ‰‹

### æœ¬åœ°æµ‹è¯•ï¼ˆå¼€å‘ç¯å¢ƒï¼‰

```bash
# 1. ä¸€é”®å¯åŠ¨æµ‹è¯•
quick_test_update.bat

# æˆ–æ‰‹åŠ¨æ­¥éª¤
python switch_update_server.py test         # åˆ‡æ¢åˆ°æµ‹è¯•æ¨¡å¼
python test_update_local.py                # å¯åŠ¨æµ‹è¯•æœåŠ¡å™¨
python test_update_cli.py all              # è¿è¡Œæ‰€æœ‰æµ‹è¯•
```

### å‘å¸ƒæ›´æ–°ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

```bash
# 1. åˆ‡æ¢åˆ°ç”Ÿäº§æ¨¡å¼
python switch_update_server.py production

# 2. ç”Ÿæˆè¡¥ä¸å’Œç‰ˆæœ¬æ–‡ä»¶
python deploy_update.py --interactive

# 3. ä¸Šä¼ åˆ°æœåŠ¡å™¨
# å°† updates/ ç›®å½•ä¸Šä¼ åˆ°æ‚¨çš„HTTPæœåŠ¡å™¨
```

---

## ğŸ“ æ–‡ä»¶é€ŸæŸ¥

| æ–‡ä»¶ | åŠŸèƒ½ | ä½¿ç”¨åœºæ™¯ |
|------|------|---------|
| `auto_updater.py` | æ ¸å¿ƒæ›´æ–°é€»è¾‘ | å·²é›†æˆåˆ°ç¨‹åº |
| `update_dialog.py` | æ›´æ–°UIç•Œé¢ | å·²é›†æˆåˆ°ç¨‹åº |
| `switch_update_server.py` | åˆ‡æ¢æµ‹è¯•/ç”Ÿäº§æ¨¡å¼ | **â­ å¸¸ç”¨** |
| `test_update_local.py` | æœ¬åœ°æµ‹è¯•æœåŠ¡å™¨ | **â­ æµ‹è¯•å¿…å¤‡** |
| `test_update_cli.py` | å‘½ä»¤è¡Œæµ‹è¯•å·¥å…· | **â­ å¿«é€ŸéªŒè¯** |
| `quick_test_update.bat` | ä¸€é”®æµ‹è¯• | **â­ æœ€ç®€å•** |
| `generate_patch.py` | ç”Ÿæˆè¡¥ä¸ï¼ˆåº•å±‚ï¼‰ | é«˜çº§ç”¨æˆ· |
| `deploy_update.py` | éƒ¨ç½²å·¥å…·ï¼ˆæ¨èï¼‰ | **â­ å‘å¸ƒæ›´æ–°** |
| `quick_deploy.bat` | ä¸€é”®éƒ¨ç½² | Windowså‘å¸ƒ |

---

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

### é…ç½®ç®¡ç†

```bash
# æŸ¥çœ‹å½“å‰æ¨¡å¼
python switch_update_server.py

# æµ‹è¯•æ¨¡å¼ â†’ ç”Ÿäº§æ¨¡å¼
python switch_update_server.py production

# ç”Ÿäº§æ¨¡å¼ â†’ æµ‹è¯•æ¨¡å¼
python switch_update_server.py test

# è‡ªå®šä¹‰æœåŠ¡å™¨
python switch_update_server.py custom https://my-server.com/updates
```

### æµ‹è¯•å‘½ä»¤

```bash
# æµ‹è¯•é…ç½®
python test_update_cli.py config

# æµ‹è¯•æœåŠ¡å™¨è¿æ¥
python test_update_cli.py connect

# æµ‹è¯•æ£€æŸ¥æ›´æ–°
python test_update_cli.py check

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python test_update_cli.py all
```

### éƒ¨ç½²å‘½ä»¤

```bash
# äº¤äº’å¼éƒ¨ç½²ï¼ˆæ¨èï¼‰
python deploy_update.py --interactive

# å‘½ä»¤è¡Œéƒ¨ç½²
python deploy_update.py \
    --new-version 2.3.0 \
    --new-file XexunRTT_v2.3.0.exe \
    --old-versions XexunRTT_v2.2.0.exe \
    --release-notes "ä¿®å¤XXé—®é¢˜"
```

---

## ğŸš¦ å·¥ä½œæµç¨‹

### å¼€å‘æµ‹è¯•æµç¨‹

```
ç¼–è¯‘æ–°ç‰ˆæœ¬
   â†“
åˆ‡æ¢åˆ°æµ‹è¯•æ¨¡å¼ (python switch_update_server.py test)
   â†“
å¯åŠ¨æµ‹è¯•æœåŠ¡å™¨ (python test_update_local.py)
   â†“
è¿è¡Œæµ‹è¯• (python test_update_cli.py all)
   â†“
éªŒè¯æ›´æ–°åŠŸèƒ½
   â†“
åˆ‡æ¢å›ç”Ÿäº§æ¨¡å¼ (python switch_update_server.py production)
```

### å‘å¸ƒæ›´æ–°æµç¨‹

```
ç¼–è¯‘æ–°ç‰ˆæœ¬
   â†“
ç¡®è®¤åœ¨ç”Ÿäº§æ¨¡å¼ (python switch_update_server.py)
   â†“
ç”Ÿæˆè¡¥ä¸ (python deploy_update.py --interactive)
   â†“
ä¸Šä¼ åˆ°æœåŠ¡å™¨ (SCP/FTP)
   â†“
éªŒè¯ (python test_update_cli.py connect)
   â†“
é€šçŸ¥ç”¨æˆ·æ›´æ–°
```

---

## ğŸ¨ é…ç½®ä¼˜å…ˆçº§

```
1ï¸âƒ£ update_config.ini (æ–‡ä»¶)
    â†“ æ²¡æœ‰
2ï¸âƒ£ XEXUNRTT_UPDATE_SERVER (ç¯å¢ƒå˜é‡)
    â†“ æ²¡æœ‰
3ï¸âƒ£ PRODUCTION_SERVER (ä»£ç é»˜è®¤å€¼)
```

---

## ğŸ“Š æ›´æ–°æ•ˆæœ

| æ›´æ–°ç±»å‹ | ä¸‹è½½å¤§å° | èŠ‚çœæµé‡ | æ—¶é—´(1Mbps) |
|---------|---------|---------|------------|
| Bugä¿®å¤ | 2-5 MB | 89-96% | ~30ç§’ |
| å°åŠŸèƒ½ | 5-10 MB | 78-89% | ~1åˆ†é’Ÿ |
| å¤§æ›´æ–° | 15-20 MB | 56-67% | ~2åˆ†é’Ÿ |
| å®Œæ•´åŒ… | 45 MB | 0% | ~6åˆ†é’Ÿ |

---

## âš™ï¸ æœåŠ¡å™¨é…ç½®

### æµ‹è¯•æœåŠ¡å™¨
- åœ°å€: `http://127.0.0.1:8888`
- ç”¨é€”: æœ¬åœ°æµ‹è¯•
- å¯åŠ¨: `python test_update_local.py`

### ç”Ÿäº§æœåŠ¡å™¨
- åœ°å€: `https://your-domain.com/xexunrtt/updates`
- ç”¨é€”: æ­£å¼å‘å¸ƒ
- éœ€è¦: ä¿®æ”¹ `auto_updater.py` ä¸­çš„ `PRODUCTION_SERVER`

---

## ğŸ› å¿«é€Ÿæ’é”™

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|---------|
| "bsdiff4 not installed" | `pip install bsdiff4` |
| "æœåŠ¡å™¨è¿æ¥å¤±è´¥" | æ£€æŸ¥æµ‹è¯•æœåŠ¡å™¨æ˜¯å¦å¯åŠ¨ |
| "å“ˆå¸ŒéªŒè¯å¤±è´¥" | é‡æ–°ç”Ÿæˆè¡¥ä¸ |
| "æœªæ‰¾åˆ°exeæ–‡ä»¶" | ç¡®ä¿å·²ç¼–è¯‘ç”Ÿæˆexe |
| æµ‹è¯•åæ— æ³•æ¢å¤ | `python switch_update_server.py production` |

---

## ğŸ“š è¯¦ç»†æ–‡æ¡£

- ğŸ’¡ **å¿«é€Ÿå…¥é—¨**: [AUTO_UPDATE_README.md](AUTO_UPDATE_README.md)
- ğŸ“– **è¯¦ç»†æ–‡æ¡£**: [AUTO_UPDATE_GUIDE.md](AUTO_UPDATE_GUIDE.md)
- ğŸ§ª **æµ‹è¯•æŒ‡å—**: [æœ¬åœ°æ›´æ–°æµ‹è¯•æŒ‡å—.md](æœ¬åœ°æ›´æ–°æµ‹è¯•æŒ‡å—.md)
- ğŸ“ **å®ç°æ€»ç»“**: [å·®å¼‚åŒ–æ›´æ–°å®ç°æ€»ç»“.md](å·®å¼‚åŒ–æ›´æ–°å®ç°æ€»ç»“.md)

---

## âœ… æ£€æŸ¥æ¸…å•

### é¦–æ¬¡ä½¿ç”¨

- [ ] å®‰è£…ä¾èµ–: `pip install bsdiff4 requests`
- [ ] ä¿®æ”¹ç”Ÿäº§æœåŠ¡å™¨åœ°å€ï¼ˆ`auto_updater.py`ï¼‰
- [ ] è¿è¡Œæœ¬åœ°æµ‹è¯•éªŒè¯åŠŸèƒ½
- [ ] é›†æˆåˆ°ä¸»ç¨‹åºï¼ˆ`main_window.py`ï¼‰

### æ¯æ¬¡å‘å¸ƒ

- [ ] ç¼–è¯‘æ–°ç‰ˆæœ¬exe
- [ ] åˆ‡æ¢åˆ°ç”Ÿäº§æ¨¡å¼
- [ ] ç”Ÿæˆè¡¥ä¸å’Œversion.json
- [ ] ä¸Šä¼ åˆ°æœåŠ¡å™¨
- [ ] éªŒè¯æœåŠ¡å™¨è¿æ¥
- [ ] æµ‹è¯•æ›´æ–°æµç¨‹

---

## ğŸ‰ å¼€å§‹ä½¿ç”¨

**ç°åœ¨å°±å¯ä»¥å¼€å§‹æµ‹è¯•äº†ï¼**

```bash
# Windows ç”¨æˆ·ï¼ˆæœ€ç®€å•ï¼‰
quick_test_update.bat

# æ‰€æœ‰å¹³å°
python switch_update_server.py test
python test_update_local.py
```

**ç¥æµ‹è¯•é¡ºåˆ©ï¼** ğŸš€

