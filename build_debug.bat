@echo off
chcp 65001 >nul
REM 编译 XexunRTT 调试版本（带控制台窗口）

echo ======================================================================
echo 🐛 XexunRTT 调试版本编译
echo ======================================================================
echo.

REM 激活虚拟环境
if exist "env\Scripts\activate.bat" (
    echo [1/3] 正在激活虚拟环境...
    call env\Scripts\activate.bat
    echo.
) else (
    echo ⚠️  警告: 虚拟环境不存在，使用系统Python
    echo.
)

echo [2/3] 开始编译调试版本...
echo ======================================================================
pyinstaller XexunRTT_debug.spec

if %errorlevel% equ 0 (
    echo.
    echo ======================================================================
    echo [3/3] 编译成功！
    echo ======================================================================
    echo.
    
    REM 查找生成的 EXE 文件
    for %%f in (dist\*_debug.exe) do (
        echo 📦 调试版本文件: %%f
        echo.
        echo 💡 提示:
        echo    - 此版本会显示控制台窗口
        echo    - 所有日志都会输出到控制台
        echo    - 适合调试和查看详细运行信息
        echo    - 不要发布此版本给用户
        echo.
        echo 🚀 现在可以运行: %%f
        echo.
    )
) else (
    echo.
    echo ======================================================================
    echo ❌ 编译失败
    echo ======================================================================
    echo.
)

pause

